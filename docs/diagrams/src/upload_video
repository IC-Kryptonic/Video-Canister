@startuml

Actor User

User -> Package ++: upload_video
Package -> Wallet_Canister ++: wallet_create_canister
Wallet_Canister ->> Video_Canister ** : create
return canister_principal

Package ->> Wallet_Canister ++: wallet_call
Wallet_Canister ->> Management_Canister ++: install_code
deactivate Management_Canister 
deactivate Wallet_Canister

Package ->> Video_Canister ++: put_meta_info
deactivate Video_Canister

loop chunk_num times
    Package ->> Video_Canister ++: put_chunk
    deactivate Video_Canister
end

opt remember
    Package ->> Index_Canister ++: post_video
    deactivate Index_Canister
end

Package --> User: canister_principal
@enduml