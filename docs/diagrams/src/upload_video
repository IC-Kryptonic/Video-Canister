@startuml

Actor User

User -> Package ++: upload_video
Package -> Spawn_Canister ++: create_new_canister

Spawn_Canister -> Video_Canister ** : create
Spawn_Canister ->> Management_Canister ++: update_settings
deactivate Management_Canister
return canister_principal

Package -> Management_Canister ++: canister_status
return canister_status
Package ->> Management_Canister ++: deposit_cycles
deactivate Management_Canister


Package ->> Video_Canister ++: put_meta_info
deactivate Video_Canister

loop chunk_num times
    Package ->> Video_Canister ++: put_chunk
    deactivate Video_Canister
end

opt remember
    Package ->> Index_Canister ++: post_video
end

Package --> User: canister_principal
@enduml